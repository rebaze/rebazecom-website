var D=YAHOO.util.Dom;var E=YAHOO.util.Event;var FORMFIELD_TYPE_SINGLELINETEXT=1;var FORMFIELD_TYPE_PARAGRAPHTEXT=2;var FORMFIELD_TYPE_NUMBER=3;var FORMFIELD_TYPE_EMAIL=4;var FORMFIELD_TYPE_WEBSITE=5;var FORMFIELD_TYPE_NAME=6;var FORMFIELD_TYPE_DATE=7;var FORMFIELD_TYPE_TIME=8;var FORMFIELD_TYPE_PHONE=9;var FORMFIELD_TYPE_PRICE=10;var FORMFIELD_TYPE_ADDRESS=11;var FORMFIELD_TYPE_SECTIONBREAK=12;var FORMFIELD_TYPE_MULTIPLECHOICE=13;var FORMFIELD_TYPE_CHECKBOXES=14;var FORMFIELD_TYPE_DROPDOWN=15;var FORMFIELD_TYPE_TITLE=16;var FORMFIELD_TYPE_PASSWORD=17;var FORMFIELD_TYPE_INFORMATION={};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_SINGLELINETEXT]={name:"Single Line Text",parameterOptions:"size",defaultParameter:"medium",requiredVisible:true,defaultVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_PARAGRAPHTEXT]={name:"Paragraph Text",parameterOptions:"size",defaultParameter:"medium",requiredVisible:true,defaultVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_NUMBER]={name:"Number",parameterOptions:"size",defaultParameter:"medium",requiredVisible:true,defaultVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_EMAIL]={name:"Email",parameterOptions:"size",defaultParameter:"medium",requiredVisible:true,defaultVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_WEBSITE]={name:"Website",parameterOptions:"size",defaultParameter:"medium",requiredVisible:true,defaultVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_NAME]={name:"Name",parameterOptions:"name",defaultParameter:"normal",defaultVisible:false,requiredVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_DATE]={name:"Date",parameterOptions:"date",defaultParameter:"mmddyyyy",defaultVisible:false,requiredVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_TIME]={name:"Time",parameterOptions:"none",defaultParameter:"",defaultVisible:false,requiredVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_PHONE]={name:"Phone",parameterOptions:"phone",defaultParameter:"normal",defaultVisible:false,requiredVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_PRICE]={name:"Price",parameterOptions:"price",defaultParameter:"dollars",defaultVisible:false,requiredVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_ADDRESS]={name:"Address",parameterOptions:"address",defaultParameter:"US",defaultVisible:false,requiredVisible:true,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_SECTIONBREAK]={name:"Section Break",parameterOptions:"none",defaultParameter:"",requiredVisible:false,defaultVisible:false,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_TITLE]={name:"Title Text",parameterOptions:"none",defaultParameter:"",requiredVisible:false,defaultVisible:false,choicesVisible:false};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_MULTIPLECHOICE]={name:"Multiple Choice",parameterOptions:"none",defaultParameter:"",requiredVisible:true,defaultVisible:false,choicesVisible:true};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_CHECKBOXES]={name:"Checkboxes",parameterOptions:"none",defaultParameter:"",requiredVisible:true,defaultVisible:false,choicesVisible:true},FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_DROPDOWN]={name:"Drop Down",parameterOptions:"size",defaultParameter:"medium",requiredVisible:true,defaultVisible:false,choicesVisible:true};FORMFIELD_TYPE_INFORMATION[FORMFIELD_TYPE_PASSWORD]={name:"Password",parameterOptions:"size",defaultParameter:"medium",requiredVisible:true,defaultVisible:true,choicesVisible:false};var __SSForm_uniqueFieldId=0;Squarespace.FormBuilder=Class.create({initialize:function(M,K,J,H,A,N,F,B,G,L,I){this._instanceName=M;this._currentModuleId=F;this._renderForExternalUsage=B;this._fixedForm=G;this._inlineForm=L;this._confirmationMessage=I;this._targetContainer=D.get(J);this._errorContainer=D.get(A);this._submitButton=D.get(N);this._outerContainer=D.get(K);this._fieldsByUniqueId={};this._fieldIdsToDatabaseIds={};this._databaseIdsToFieldIds={};this._visibleErrors=new Array();this._titleFieldIds=new Array();this._fieldCount=0;this._lastFocusedFieldId=null;this._autosaveRequired=false;this._fieldRequiredMarker="*";this._fieldClassModifier=(L?"-inline":"");D.setStyle("formEmptyMessage"+this._currentModuleId,"display","block");var C=D.get(H);if(this._fixedForm&&C){C.style.display="none";}},renderField:function(H){var J=D.get("formField"+H.fieldId);if(H.fieldType=="unknown"){J.style.display="none";return ;}if(J.style.display=="none"){J.style.display="block";}var I="";var C=D.get("formFieldContainer"+H.fieldId);C.className=(H.fieldId==this._lastFocusedFieldId?"fieldContainerActive":"fieldContainer");if(this._renderForExternalUsage){roCode="";}else{roCode='readonly="readonly"';}if(H.fieldType==FORMFIELD_TYPE_SINGLELINETEXT){objCode="<input "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-'+H.parameters+""+this._fieldClassModifier+'" value="'+H.defaultValue+'"/>';}else{if(H.fieldType==FORMFIELD_TYPE_PASSWORD){objCode="<input "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="password" class="text singlelinetext-'+H.parameters+""+this._fieldClassModifier+'" value="'+H.defaultValue+'"/>';}else{if(H.fieldType==FORMFIELD_TYPE_PARAGRAPHTEXT){objCode="<textarea "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text paragraphtext-'+H.parameters+""+this._fieldClassModifier+'">'+H.defaultValue+"</textarea>";}else{if(H.fieldType==FORMFIELD_TYPE_NUMBER){objCode="<input "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-'+H.parameters+""+this._fieldClassModifier+'" value="'+(H.defaultValue!=""?H.defaultValue:"0123456789")+'"/>';}else{if(H.fieldType==FORMFIELD_TYPE_EMAIL){objCode="<input "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-'+H.parameters+""+this._fieldClassModifier+'" value="'+(H.defaultValue!=""?H.defaultValue:"@")+'"/>';}else{if(H.fieldType==FORMFIELD_TYPE_WEBSITE){objCode="<input "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-'+H.parameters+""+this._fieldClassModifier+'" value="'+(H.defaultValue!=""?H.defaultValue:"http://")+'"/>';}else{if(H.fieldType==FORMFIELD_TYPE_DROPDOWN){objCode="<select "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" class="text singlelinetext-'+H.parameters+'">';var F=H.choices.split("\n");for(var B=0;B<F.length;++B){var G="";var A=F[B];if(F[B].indexOf("*")==F[B].length-1){G='selected="selected"';A=F[B].substring(0,F[B].length-1);I=A;}if(A.length>0){objCode+="<option "+G+' value="'+A+'">'+A+"</option>";}}objCode+="</select>";}else{if(H.fieldType==FORMFIELD_TYPE_MULTIPLECHOICE){objCode="";var F=H.choices.split("\n");for(var B=0;B<F.length;++B){var G="";var A=F[B];if(F[B].indexOf("*")==F[B].length-1){G='checked="checked"';A=F[B].substring(0,F[B].length-1);I=A;}if(A.length>0){objCode+='<div class="optionRow"><input '+roCode+' id="formFieldEl'+H.fieldId+"-"+B+'" name="formFieldEl'+H.fieldId+'" type="radio" onfocus="'+this._instanceName+".focusField("+H.fieldId+');"/> '+A+"</div>";}}}else{if(H.fieldType==FORMFIELD_TYPE_CHECKBOXES){objCode="";var F=H.choices.split("\n");for(var B=0;B<F.length;++B){var G="";var A=F[B];if(F[B].indexOf("*")==F[B].length-1){G='checked="checked"';A=F[B].substring(0,F[B].length-1);I=A;}if(A.length>0){objCode+='<div class="optionRow"><input '+roCode+' id="formFieldEl'+H.fieldId+"-"+B+'" name="formFieldEl'+H.fieldId+'" type="checkbox" onfocus="'+this._instanceName+".focusField("+H.fieldId+');"/> '+A+"</div>";}}}else{if(H.fieldType==FORMFIELD_TYPE_ADDRESS){objCode='<div style="padding-bottom: 2px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'A1" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-large'+this._fieldClassModifier+'" value=""/>'+'<div class="fieldHelp">Street Address</div>'+"</div>"+'<div style="padding-bottom: 2px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'A2" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-large'+this._fieldClassModifier+'" value=""/>'+'<div class="fieldHelp">Address Line 2</div>'+"</div>"+'<div style="float: left; padding-right: 10px; padding-bottom: 2px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'CT" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 140px;" value=""/>'+'<div class="fieldHelp">City</div>'+"</div>"+'<div style="float: left; padding-right: 10px; padding-bottom: 2px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'ST" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 140px;" value=""/>'+'<div class="fieldHelp">State / Province / Region</div>'+"</div>"+'<div style="clear: both;"><div style="float: left; padding-right: 10px; padding-bottom: 2px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'ZP" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 140px;" value=""/>'+'<div class="fieldHelp">Zip / Postal Code</div>'+"</div>"+'<div style="float: left; padding-right: 10px; padding-bottom: 2px;">'+"<select "+roCode+' onfocus="'+this._instanceName+".focusField("+H.fieldId+');" id="formFieldEl'+H.fieldId+'CO" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 147px;"/>'+'<option value="US">United States</option>'+'<option value="CA">Canada</option>'+'<option value="AF">Afghanistan</option>'+'<option value="AL">Albania</option>'+'<option value="DZ">Algeria</option>'+'<option value="AS">American Samoa</option>'+'<option value="AD">Andorra</option>'+'<option value="AO">Angola</option>'+'<option value="AI">Anguilla</option>'+'<option value="AQ">Antarctica</option>'+'<option value="AG">Antigua and Barbuda</option>'+'<option value="AR">Argentina</option>'+'<option value="AM">Armenia</option>'+'<option value="AW">Aruba</option>'+'<option value="AU">Australia</option>'+'<option value="AT">Austria</option>'+'<option value="AZ">Azerbaijan</option>'+'<option value="BS">Bahamas</option>'+'<option value="BH">Bahrain</option>'+'<option value="BD">Bangladesh</option>'+'<option value="BB">Barbados</option>'+'<option value="BY">Belarus</option>'+'<option value="BE">Belgium</option>'+'<option value="BZ">Belize</option>'+'<option value="BJ">Benin</option>'+'<option value="BM">Bermuda</option>'+'<option value="BT">Bhutan</option>'+'<option value="BO">Bolivia</option>'+'<option value="BA">Bosnia and Herzegovina</option>'+'<option value="BW">Botswana</option>'+'<option value="BV">Bouvet Island</option>'+'<option value="BR">Brazil</option>'+'<option value="IO">British Indian Ocean Territory</option>'+'<option value="BN">Brunei Darussalam</option>'+'<option value="BG">Bulgaria</option>'+'<option value="BF">Burkina Faso</option>'+'<option value="BI">Burundi</option>'+'<option value="KH">Cambodia</option>'+'<option value="CM">Cameroon</option>'+'<option value="CV">Cape Verde</option>'+'<option value="KY">Cayman Islands</option>'+'<option value="CF">Central African Republic</option>'+'<option value="TD">Chad</option>'+'<option value="CL">Chile</option>'+'<option value="CN">China</option>'+'<option value="CX">Christmas Island</option>'+'<option value="CC">Cocos (Keeling) Islands</option>'+'<option value="CO">Colombia</option>'+'<option value="KM">Comoros</option>'+'<option value="CG">Congo</option>'+'<option value="CK">Cook Islands</option>'+'<option value="CR">Costa Rica</option>'+'<option value="HR">Croatia (Hrvatska)</option>'+'<option value="CU">Cuba</option>'+'<option value="CY">Cyprus</option>'+'<option value="CZ">Czech Republic</option>'+'<option value="CS">Czechoslovakia (former)</option>'+'<option value="DK">Denmark</option>'+'<option value="DJ">Djibouti</option>'+'<option value="DM">Dominica</option>'+'<option value="DO">Dominican Republic</option>'+'<option value="TP">East Timor</option>'+'<option value="EC">Ecuador</option>'+'<option value="EG">Egypt</option>'+'<option value="SV">El Salvador</option>'+'<option value="GQ">Equatorial Guinea</option>'+'<option value="ER">Eritrea</option>'+'<option value="EE">Estonia</option>'+'<option value="ET">Ethiopia</option>'+'<option value="FK">Falkland Islands (Malvinas)</option>'+'<option value="FO">Faroe Islands</option>'+'<option value="FJ">Fiji</option>'+'<option value="FI">Finland</option>'+'<option value="FR">France</option>'+'<option value="FX">France, Metropolitan</option>'+'<option value="GF">French Guiana</option>'+'<option value="PF">French Polynesia</option>'+'<option value="TF">French Southern Territories</option>'+'<option value="GA">Gabon</option>'+'<option value="GM">Gambia</option>'+'<option value="GE">Georgia</option>'+'<option value="DE">Germany</option>'+'<option value="GH">Ghana</option>'+'<option value="GI">Gibraltar</option>'+'<option value="GB">Great Britain (UK)</option>'+'<option value="GR">Greece</option>'+'<option value="GL">Greenland</option>'+'<option value="GD">Grenada</option>'+'<option value="GP">Guadeloupe</option>'+'<option value="GU">Guam</option>'+'<option value="GT">Guatemala</option>'+'<option value="GN">Guinea</option>'+'<option value="GW">Guinea-Bissau</option>'+'<option value="GY">Guyana</option>'+'<option value="HT">Haiti</option>'+'<option value="HM">Heard and McDonald Islands</option>'+'<option value="HN">Honduras</option>'+'<option value="HK">Hong Kong</option>'+'<option value="HU">Hungary</option>'+'<option value="IS">Iceland</option>'+'<option value="IN">India</option>'+'<option value="ID">Indonesia</option>'+'<option value="IR">Iran</option>'+'<option value="IQ">Iraq</option>'+'<option value="IE">Ireland</option>'+'<option value="IL">Israel</option>'+'<option value="IT">Italy</option>'+'<option value="JM">Jamaica</option>'+'<option value="JP">Japan</option>'+'<option value="JO">Jordan</option>'+'<option value="KZ">Kazakhstan</option>'+'<option value="KE">Kenya</option>'+'<option value="KI">Kiribati</option>'+'<option value="KP">Korea (North)</option>'+'<option value="KR">Korea (South)</option>'+'<option value="KW">Kuwait</option>'+'<option value="KG">Kyrgyzstan</option>'+'<option value="LA">Laos</option>'+'<option value="LV">Latvia</option>'+'<option value="LB">Lebanon</option>'+'<option value="LS">Lesotho</option>'+'<option value="LR">Liberia</option>'+'<option value="LY">Libya</option>'+'<option value="LI">Liechtenstein</option>'+'<option value="LT">Lithuania</option>'+'<option value="MO">Macau</option>'+'<option value="MK">Macedonia</option>'+'<option value="MG">Madagascar</option>'+'<option value="MW">Malawi</option>'+'<option value="MY">Malaysia</option>'+'<option value="MV">Maldives</option>'+'<option value="ML">Mali</option>'+'<option value="MT">Malta</option>'+'<option value="MH">Marshall Islands</option>'+'<option value="MQ">Martinique</option>'+'<option value="MR">Mauritania</option>'+'<option value="MU">Mauritius</option>'+'<option value="YT">Mayotte</option>'+'<option value="MX">Mexico</option>'+'<option value="FM">Micronesia</option>'+'<option value="MD">Moldova</option>'+'<option value="MC">Monaco</option>'+'<option value="MN">Mongolia</option>'+'<option value="MS">Montserrat</option>'+'<option value="MA">Morocco</option>'+'<option value="MZ">Mozambique</option>'+'<option value="MM">Myanmar</option>'+'<option value="NA">Namibia</option>'+'<option value="NR">Nauru</option>'+'<option value="NP">Nepal</option>'+'<option value="NL">Netherlands</option>'+'<option value="AN">Netherlands Antilles</option>'+'<option value="NT">Neutral Zone</option>'+'<option value="NC">New Caledonia</option>'+'<option value="NZ">New Zealand (Aotearoa)</option>'+'<option value="NI">Nicaragua</option>'+'<option value="NE">Niger</option>'+'<option value="NG">Nigeria</option>'+'<option value="NU">Niue</option>'+'<option value="NF">Norfolk Island</option>'+'<option value="MP">Northern Mariana Islands</option>'+'<option value="NO">Norway</option>'+'<option value="OM">Oman</option>'+'<option value="PK">Pakistan</option>'+'<option value="PW">Palau</option>'+'<option value="PA">Panama</option>'+'<option value="PG">Papua New Guinea</option>'+'<option value="PY">Paraguay</option>'+'<option value="PE">Peru</option>'+'<option value="PH">Philippines</option>'+'<option value="PN">Pitcairn</option>'+'<option value="PL">Poland</option>'+'<option value="PT">Portugal</option>'+'<option value="PR">Puerto Rico</option>'+'<option value="QA">Qatar</option>'+'<option value="RE">Reunion</option>'+'<option value="RO">Romania</option>'+'<option value="RU">Russian Federation</option>'+'<option value="RW">Rwanda</option>'+'<option value="GS">S. Georgia and S. Sandwich Isls.</option>'+'<option value="KN">Saint Kitts and Nevis</option>'+'<option value="LC">Saint Lucia</option>'+'<option value="VC">Saint Vincent and the Grenadines</option>'+'<option value="WS">Samoa</option>'+'<option value="SM">San Marino</option>'+'<option value="ST">Sao Tome and Principe</option>'+'<option value="SA">Saudi Arabia</option>'+'<option value="SN">Senegal</option>'+'<option value="SC">Seychelles</option>'+'<option value="SL">Sierra Leone</option>'+'<option value="SG">Singapore</option>'+'<option value="SK">Slovak Republic</option>'+'<option value="SI">Slovenia</option>'+'<option value="Sb">Solomon Islands</option>'+'<option value="SO">Somalia</option>'+'<option value="ZA">South Africa</option>'+'<option value="ES">Spain</option>'+'<option value="LK">Sri Lanka</option>'+'<option value="SH">St. Helena</option>'+'<option value="PM">St. Pierre and Miquelon</option>'+'<option value="SD">Sudan</option>'+'<option value="SR">Suriname</option>'+'<option value="SJ">Svalbard and Jan Mayen Islands</option>'+'<option value="SZ">Swaziland</option>'+'<option value="SE">Sweden</option>'+'<option value="CH">Switzerland</option>'+'<option value="SY">Syria</option>'+'<option value="TW">Taiwan</option>'+'<option value="TJ">Tajikistan</option>'+'<option value="TZ">Tanzania</option>'+'<option value="TH">Thailand</option>'+'<option value="TG">Togo</option>'+'<option value="TK">Tokelau</option>'+'<option value="TO">Tonga</option>'+'<option value="TT">Trinidad and Tobago</option>'+'<option value="TN">Tunisia</option>'+'<option value="TR">Turkey</option>'+'<option value="TM">Turkmenistan</option>'+'<option value="TC">Turks and Caicos Islands</option>'+'<option value="TV">Tuvalu</option>'+'<option value="UM">US Minor Outlying Islands</option>'+'<option value="SU">USSR (former)</option>'+'<option value="UG">Uganda</option>'+'<option value="UA">Ukraine</option>'+'<option value="AE">United Arab Emirates</option>'+'<option value="UK">United Kingdom</option>'+'<option value="UY">Uruguay</option>'+'<option value="UZ">Uzbekistan</option>'+'<option value="VU">Vanuatu</option>'+'<option value="VA">Vatican City State (Holy See)</option>'+'<option value="VE">Venezuela</option>'+'<option value="VN">Viet Nam</option>'+'<option value="VG">Virgin Islands (British)</option>'+'<option value="VI">Virgin Islands (U.S.)</option>'+'<option value="WF">Wallis and Futuna Islands</option>'+'<option value="EH">Western Sahara</option>'+'<option value="YE">Yemen</option>'+'<option value="YU">Yugoslavia</option>'+'<option value="ZR">Zaire</option>'+'<option value="ZM">Zambia</option>'+'<option value="ZW">Zimbabwe</option>'+"</select>"+'<div class="fieldHelp">Country</div></div>'+"</div>";objCode+='<div style="clear: both; line-height: 1px; height: 1px;">&nbsp;</div>';}else{if(H.fieldType==FORMFIELD_TYPE_NAME){objCode='<div style="float: left; padding-right: 10px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'NF" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 85px;" value=""/>'+'<div class="fieldHelp">First</div>'+"</div>"+'<div style="float: left; padding-right: 10px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'NL" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 85px;" value=""/>'+'<div class="fieldHelp">Last</div>'+"</div>";if(H.parameters=="extended"){objCode='<div style="float: left; padding-right: 10px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'TI" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 35px;" value=""/>'+'<div class="fieldHelp">Title</div>'+"</div>"+objCode+'<div style="float: left; padding-right: 10px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'SF" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 35px;" value=""/>'+'<div class="fieldHelp">Suffix</div>'+"</div>";}objCode+='<div style="clear: both; line-height: 1px; height: 1px;">&nbsp;</div>';}else{if(H.fieldType==FORMFIELD_TYPE_DATE){if(H.parameters=="mmddyyyy"){objCode='<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'MM" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 25px;" value=""/>'+'<div class="fieldHelp">MM</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">/</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'DD" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 25px;" value=""/>'+'<div class="fieldHelp">DD</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">/</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'YY" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 30px;" value=""/>'+'<div class="fieldHelp">YYYY</div>'+"</div>";}else{objCode='<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'DD" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 25px;" value=""/>'+'<div class="fieldHelp">DD</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">/</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'MM" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 25px;" value=""/>'+'<div class="fieldHelp">MM</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">/</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'YY" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 30px;" value=""/>'+'<div class="fieldHelp">YYYY</div>'+"</div>";}objCode+='<div style="clear: both; line-height: 1px; height: 1px;">&nbsp;</div>';}else{if(H.fieldType==FORMFIELD_TYPE_TIME){objCode='<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'HH" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 18px;" value=""/>'+'<div class="fieldHelp">HH</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">:</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'MM" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 18px;" value=""/>'+'<div class="fieldHelp">MM</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">:</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'SS" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 18px;" value=""/>'+'<div class="fieldHelp">SS</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">'+'<select onfocus="'+this._instanceName+".focusField("+H.fieldId+');" id="formFieldEl'+H.fieldId+'AP" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 60px;"/>'+'<option value="am">AM</option>'+'<option value="pm">PM</option>'+"</select>"+"</div>";objCode+='<div style="clear: both; line-height: 1px; height: 1px;">&nbsp;</div>';}else{if(H.fieldType==FORMFIELD_TYPE_PHONE){if(H.parameters=="normal"){objCode='<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' maxlength="3" id="formFieldEl'+H.fieldId+'P1" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 35px;" value=""/>'+'<div class="fieldHelp">(###)</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">-</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' maxlength="3" id="formFieldEl'+H.fieldId+'P2" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 35px;" value=""/>'+'<div class="fieldHelp">###</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">-</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' maxlength="4" id="formFieldEl'+H.fieldId+'P3" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 35px;" value=""/>'+'<div class="fieldHelp">####</div>'+"</div>";}else{objCode='<div style="float: left; padding-right: 10px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 130px;" value=""/>'+"</div>";}objCode+='<div style="clear: both; line-height: 1px; height: 1px;">&nbsp;</div>';}else{if(H.fieldType==FORMFIELD_TYPE_PRICE){if(H.parameters=="dollars"){objCode='<div style="float: left; padding-right: 4px;">&#36;</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'DL" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 75px;" value=""/>'+'<div class="fieldHelp">Dollars</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">.</div>'+'<div style="float: left; padding-right: 10px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'CT" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 35px;" value=""/>'+'<div class="fieldHelp">Cents</div>'+"</div>";}else{if(H.parameters=="euros"){objCode='<div style="float: left; padding-right: 4px;">&euro;</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'DL" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 75px;" value=""/>'+'<div class="fieldHelp">Euros</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">.</div>'+'<div style="float: left; padding-right: 10px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'CT" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 35px;" value=""/>'+'<div class="fieldHelp">Cents</div>'+"</div>";}else{if(H.parameters=="pounds"){objCode='<div style="float: left; padding-right: 4px;">&pound;</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'DL" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 75px;" value=""/>'+'<div class="fieldHelp">Pounds</div>'+"</div>"+'<div style="float: left; padding-right: 4px;">.</div>'+'<div style="float: left; padding-right: 10px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'CT" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 35px;" value=""/>'+'<div class="fieldHelp">Pence</div>'+"</div>";}else{if(H.parameters=="yen"){objCode='<div style="float: left; padding-right: 4px;">&yen;</div>'+'<div style="float: left; padding-right: 4px;">'+"<input "+roCode+' id="formFieldEl'+H.fieldId+'" onfocus="'+this._instanceName+".focusField("+H.fieldId+');" type="text" class="text singlelinetext-small'+this._fieldClassModifier+'" style="width: 135px;" value=""/>'+'<div class="fieldHelp">Yen</div>'+"</div>";}}}}objCode+='<div style="clear: both; line-height: 1px; height: 1px;">&nbsp;</div>';}else{objCode="";}}}}}}}}}}}}}}}if(H.fieldType==FORMFIELD_TYPE_TITLE||H.fieldType==FORMFIELD_TYPE_SECTIONBREAK){instructionCode='<div id="formField'+H.fieldId+'Subtitle" class="formTitle">'+H.instructions.replace(/\n/gi,"<br/>")+"</div>";}else{instructionCode='<div id="formField'+H.fieldId+'Subtitle" class="fieldHelp">'+H.instructions.replace(/\n/gi,"<br/>")+"</div>";}errorCode='<div id="formField'+H.fieldId+'Error" style="display: none;" class="fieldTitle error-text"></div>';if(H.fieldType==FORMFIELD_TYPE_TITLE){titleCode='<h3 id="formField'+H.fieldId+'Title" class="formCaption">'+H.title+"</h3>";}else{titleCode='<div id="formField'+H.fieldId+'Title" class="fieldTitle">'+H.title+' <span class="fieldRequiredStar">'+(H.required?this._fieldRequiredMarker:"")+"</span></div>";}C.innerHTML=errorCode+titleCode+'<div class="fieldObjects">'+objCode+"</div>"+instructionCode;if(H.fieldType==FORMFIELD_TYPE_SECTIONBREAK){C.innerHTML='<div class="sectionBreak">'+C.innerHTML+"</div>";}if(H.fieldType==FORMFIELD_TYPE_DROPDOWN){D.get("formFieldEl"+H.fieldId).value=I;}else{if(H.fieldType==FORMFIELD_TYPE_MULTIPLECHOICE){var F=H.choices.split("\n");for(var B=0;B<F.length;++B){if(F[B].length>0&&F[B].indexOf("*")==F[B].length-1){D.get("formFieldEl"+H.fieldId+"-"+B).checked=true;}}}else{if(H.fieldType==FORMFIELD_TYPE_CHECKBOXES){var F=H.choices.split("\n");for(var B=0;B<F.length;++B){if(F[B].length>0&&F[B].indexOf("*")==F[B].length-1){D.get("formFieldEl"+H.fieldId+"-"+B).checked=true;}}}else{if(H.fieldType==FORMFIELD_TYPE_ADDRESS){D.get("formFieldEl"+H.fieldId+"CO").value=H.parameters;}}}}},setupEditingControls:function(C){if(C.fieldType=="unknown"){return("");}var F="",A="",G="",B="";var B="Adjusting "+FORMFIELD_TYPE_INFORMATION[C.fieldType].name+" Properties";if(FORMFIELD_TYPE_INFORMATION[C.fieldType].parameterOptions=="size"){F='<div class="adminEditingControlTitle">Field Size</div>'+'<div><select type="text" id="formFieldParameters" style="width: 136px;" class="adminEditingControlText" onchange="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');">'+'<option value="small">Small</option>'+'<option value="medium">Medium</option>'+'<option value="large">Large</option>'+"</select></div>";}else{if(FORMFIELD_TYPE_INFORMATION[C.fieldType].parameterOptions=="name"){F='<div class="adminEditingControlTitle">Type</div>'+'<div><select type="text" id="formFieldParameters" style="width: 136px;" class="adminEditingControlText" onchange="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');">'+'<option value="normal">Normal</option>'+'<option value="extended">Extended</option>'+"</select></div>";}else{if(FORMFIELD_TYPE_INFORMATION[C.fieldType].parameterOptions=="date"){F='<div class="adminEditingControlTitle">Type</div>'+'<div><select type="text" id="formFieldParameters" style="width: 136px;" class="adminEditingControlText" onchange="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');">'+'<option value="mmddyyyy">MM / DD / YYYY</option>'+'<option value="ddmmyyyy">DD / MM / YYYY</option>'+"</select></div>";}else{if(FORMFIELD_TYPE_INFORMATION[C.fieldType].parameterOptions=="phone"){F='<div class="adminEditingControlTitle">Phone</div>'+'<div><select type="text" id="formFieldParameters" style="width: 136px;" class="adminEditingControlText" onchange="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');">'+'<option value="normal">Normal</option>'+'<option value="international">International</option>'+"</select></div>";}else{if(FORMFIELD_TYPE_INFORMATION[C.fieldType].parameterOptions=="price"){F='<div class="adminEditingControlTitle">Price</div>'+'<div><select type="text" id="formFieldParameters" style="width: 136px;" class="adminEditingControlText" onchange="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');">'+'<option value="dollars">Dollars</option>'+'<option value="euros">Euros</option>'+'<option value="pounds">Pounds</option>'+'<option value="yen">Yen</option>'+"</select></div>";}else{if(FORMFIELD_TYPE_INFORMATION[C.fieldType].parameterOptions=="address"){F='<div class="adminEditingControlTitle">Default Country</div>'+'<div><select type="text" id="formFieldParameters" style="width: 136px;" class="adminEditingControlText" onchange="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');">'+D.get("formFieldEl"+C.fieldId+"CO").innerHTML+"</select></div>";}}}}}}if(FORMFIELD_TYPE_INFORMATION[C.fieldType].defaultVisible){A='<div class="adminEditingControlTitle">Default Value</div>'+'<div><input type="text" maxlength="300" id="formFieldDefaultValue" class="adminEditingControlText" onkeyup="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');"/></div>';}if(FORMFIELD_TYPE_INFORMATION[C.fieldType].choicesVisible){A='<div class="adminEditingControlTitle">Choices (One per line / Mark default with a *)</div>'+'<div><textarea type="text" style="height: 60px;" id="formFieldChoices" class="adminEditingControlText" onkeyup="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');"></textarea></div>';}if(FORMFIELD_TYPE_INFORMATION[C.fieldType].requiredVisible){if(this._fixedForm){G='<input style="display: none;" id="formFieldRequired" type="checkbox"/>';}else{G='<div style="padding-top: 3px;"><input onclick="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');" id="formFieldRequired" type="checkbox" class="adminEditingControlCheckbox"/>&nbsp;&nbsp;<span class="adminEditingControlTitle">Required Field?</span></div>';}}Squarespace.Interaction.EditingTip.setHTML(B,'<div style="float: left;">'+'<div class="adminEditingControlTitle">Field Title</div>'+'<div><input type="text" maxlength="100" id="formFieldTitle" style="width: 136px;" class="adminEditingControlText" onkeyup="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');"/></div>'+"</div>"+'<div style="float: left; padding-left: 20px;">'+F+"</div>"+'<div style="clear: both;"></div>'+A+'<div class="adminEditingControlTitle">User Instructions</div>'+'<div><textarea type="text" id="formFieldInstructions" class="adminEditingControlTextarea" onkeyup="'+this._instanceName+".adjustFieldProperties("+C.fieldId+');" value="'+C.instructions+'"/></textarea></div>'+G+'<div style="padding-top: 12px; width: 315px;">'+'<a style="float: left;" class="button important" href="javascript:noop();" onclick="'+this._instanceName+".doSaveButton("+C.fieldId+');"><span>Save</span></a>'+'<a style="float: left; margin-left: 8px;" class="button" href="javascript:noop();" onclick="'+this._instanceName+".closeField(); "+this._instanceName+'.closeField();"><span>Close</span></a>'+(!this._fixedForm?'<a style="float: right;" class="button" href="javascript:noop();" onclick="'+this._instanceName+".confirmDeleteField("+C.fieldId+');"><span>Delete</span></a>':"")+'<div class="clearer">&nbsp;</div>');},doSaveButton:function(A){if(this.saveField(A)){this.closeField();}},adjustFieldProperties:function(C){var B=D.get("formFieldContainer"+C);var A=this._fieldsByUniqueId[C];A.title=D.get("formFieldTitle").value;if(FORMFIELD_TYPE_INFORMATION[A.fieldType].defaultVisible){A.defaultValue=D.get("formFieldDefaultValue").value;}if(FORMFIELD_TYPE_INFORMATION[A.fieldType].choicesVisible){A.choices=D.get("formFieldChoices").value.replace(/\r/gi,"");}if(FORMFIELD_TYPE_INFORMATION[A.fieldType].parameterOptions!="none"){A.parameters=D.get("formFieldParameters").value;}if(FORMFIELD_TYPE_INFORMATION[A.fieldType].requiredVisible){A.required=D.get("formFieldRequired").checked;}A.instructions=D.get("formFieldInstructions").value;this._autosaveRequired=true;this.renderField(A);this.positionFlyout();},closeField:function(){Squarespace.Interaction.EditingTip.hide();this.blurField();},confirmDeleteField:function(A){Squarespace.ConfirmationDialog.show("Delete Field?","Are you sure you wish to remove this field?",this.deleteField.bind(this,A));},deleteField:function(G){this.blurField(G);--this._fieldCount;f=this._fieldsByUniqueId[G];var F=this._fieldIdsToDatabaseIds[f.fieldId];if(f.ddItem){f.ddItem.remove();}if(F!=null){var B="/process/admin/RemoveFormFieldAsync";var C="moduleId="+this._currentModuleId+"&itemId="+F+"&instanceName="+encodeURIComponent(this._instanceName)+"&SS_AUTHKEY="+Squarespace.Constants.SS_AUTHKEY;YAHOO.util.Connect.resetDefaultHeaders();YAHOO.util.Connect.setDefaultPostHeader(false);YAHOO.util.Connect.initHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");YAHOO.util.Connect.asyncRequest("POST",B,{timeout:10000,failure:function(H){alert("Warning!  Some dynamic changes have not been saved, as your request has failed to reach the server.  You might want to check your connection to the internet before proceeding with more changes.");}},C);}delete this._fieldsByUniqueId[G];delete this._fieldIdsToDatabaseIds[G];var A=D.get("formField"+G);this._targetContainer.removeChild(A);Squarespace.Interaction.EditingTip.hide();if(this._fieldCount==0){D.setStyle("formEmptyMessage"+this._currentModuleId,"display","block");}},positionFlyout:function(){if(this._lastFocusedFieldId!=null){var A=D.get("formFieldContainer"+this._lastFocusedFieldId);var B=D.getXY(A);Squarespace.Interaction.EditingTip.show({x:(B[0]),y:(B[1]+A.offsetHeight-15)});}},focusField:function(C){if(Squarespace.EditingEnvironment&&!Squarespace.EditingEnvironment.checkMode("content")){return ;}var B=D.get("formFieldContainer"+C);var A=this._fieldsByUniqueId[C];if(A.fieldType=="unknown"){return ;}if(this._lastFocusedFieldId!=C){if(this._lastFocusedFieldId!=null){if(!this._renderForExternalUsage&&this._autosaveRequired){this.saveField(this._lastFocusedFieldId);}this.blurField();}this._lastFocusedFieldId=C;B.className="fieldContainerActive";if(!this._renderForExternalUsage){this.setupEditingControls(A);this.positionFlyout();D.get("formFieldTitle").value=A.title;if(FORMFIELD_TYPE_INFORMATION[A.fieldType].defaultVisible){D.get("formFieldDefaultValue").value=A.defaultValue;}if(FORMFIELD_TYPE_INFORMATION[A.fieldType].choicesVisible){D.get("formFieldChoices").value=A.choices;}if(FORMFIELD_TYPE_INFORMATION[A.fieldType].parameterOptions!="none"){D.get("formFieldParameters").value=A.parameters;}if(FORMFIELD_TYPE_INFORMATION[A.fieldType].requiredVisible){D.get("formFieldRequired").checked=A.required;}D.get("formFieldInstructions").value=A.instructions;D.get("formFieldTitle").focus();}}},blurField:function(C){if(!C){C=this._lastFocusedFieldId;}if(!C){return ;}var B=D.get("formFieldContainer"+C);var A=this._fieldsByUniqueId[C];B.className="fieldContainer";if(!this._renderForExternalUsage){}this._lastFocusedFieldId=null;},beginAddField:function(){var B=this.internalAddField("unknown");var A="";A='<select style="width: 200px;" id="newFieldType">';for(fv in FORMFIELD_TYPE_INFORMATION){if(fv!=FORMFIELD_TYPE_PASSWORD){A+='<option value="'+fv+'">'+FORMFIELD_TYPE_INFORMATION[fv].name+"</option>";}}A+='</select><div style="padding-top: 15px;">'+'<a style="float: left;" class="button important" href="javascript:noop();" onclick="'+this._instanceName+".addFieldByType('"+B.fieldId+"', D.get('newFieldType').value);\"><span>Create Field</span></a>"+'<a style="float: left; margin-left: 5px;" class="button" href="javascript:noop();" onclick="'+this._instanceName+".deleteField("+B.fieldId+');"><span>Cancel</span></a>'+'<br class="clearer"/>'+"</div>";Squarespace.Interaction.EditingTip.setHTML("Select New Field Type",A);var C=D.getXY("formField"+B.fieldId);Squarespace.Interaction.EditingTip.show({x:(C[0]),y:(C[1]+30)});this.renderField(B);if(this._lastFocusedFieldId!=null){this.blurField();}},internalAddField:function(C){++__SSForm_uniqueFieldId;++this._fieldCount;var F=new Object();F.fieldType=C;F.fieldId=__SSForm_uniqueFieldId;this._fieldsByUniqueId[F.fieldId]=F;if(this._fieldCount==1){this._targetContainer.innerHTML="";this._submitButton.style.display="block";}var B=document.createElement("li");B.id="formField"+F.fieldId;B.onclick=new Function(this._instanceName+".focusField("+F.fieldId+");");var A=document.createElement("div");A.id="formFieldContainer"+F.fieldId;A.className="fieldContainer";B.appendChild(A);if(this._fixedForm&&!this._renderForExternalUsage){B.style.cursor="pointer";}if(F.fieldType==FORMFIELD_TYPE_TITLE){this._titleFieldIds.push(F.fieldId);}if(Squarespace.Orderable){var G=Squarespace.Orderable.ItemManager.getLastDraggable(this._targetContainer);if(G){this._targetContainer.insertBefore(B,G.nextSibling);}else{this._targetContainer.appendChild(B);}if(F.fieldType!="unknown"&&!this._renderForExternalUsage&&!this._fixedForm){F.ddItem=new Squarespace.Orderable.Item("formField"+F.fieldId,this._currentModuleId,"formFields","content");}}else{this._targetContainer.appendChild(B);}D.setStyle("formEmptyMessage"+this._currentModuleId,"display","none");return(F);},addFieldByType:function(I,F){f=this._fieldsByUniqueId[I];this._fieldIdsToDatabaseIds[I]=null;var H="New Field";var G=false;var C=2;while(!G){var B=H;for(var A in this._fieldsByUniqueId){if(H==this._fieldsByUniqueId[A].title){H="New Field "+C;C++;break;}}if(H==B){G=true;}}f.title=H;f.fieldType=F;f.parameters=FORMFIELD_TYPE_INFORMATION[f.fieldType].defaultParameter;f.instructions="";f.required=false;f.choices=(FORMFIELD_TYPE_INFORMATION[f.fieldType].choicesVisible?"One\nTwo\nThree":"");f.defaultValue="";this.renderField(f);this.saveField(I);if(Squarespace.Orderable){f.ddItem=new Squarespace.Orderable.Item("formField"+f.fieldId,this._currentModuleId,"formFields","content");Squarespace.Orderable.ItemManager.initialize();}this.focusField(I);},callbackMapExternalIdToDatabaseId:function(A,B){this._fieldIdsToDatabaseIds[A]=B;},doFieldError:function(B,A){D.get("formField"+B+"Title").className=D.get("formField"+B+"Title").className+" error-text";D.get("formField"+B+"Error").style.display="block";D.get("formField"+B+"Error").innerHTML=A;},saveField:function(id){f=this._fieldsByUniqueId[id];for(var t in this._fieldsByUniqueId){if(f.title==this._fieldsByUniqueId[t].title&&t!=id){this.doFieldError(id,'[ The field "'+f.title+'" is already in use.  Please choose another. ]');return false;}}var existingId=this._fieldIdsToDatabaseIds[f.fieldId];var func="/process/admin/CreateOrModifyFormFieldAsync";var data="moduleId="+this._currentModuleId+"&fieldType="+f.fieldType+(existingId!=null?"&fieldId="+existingId:"")+"&externalId="+encodeURIComponent(f.fieldId)+"&title="+encodeURIComponent(f.title)+"&parameters="+encodeURIComponent(f.parameters)+"&choices="+encodeURIComponent(f.choices)+"&instructions="+encodeURIComponent(f.instructions)+"&defaultValue="+encodeURIComponent(f.defaultValue)+"&required="+encodeURIComponent(f.required)+"&instanceName="+encodeURIComponent(this._instanceName)+"&SS_AUTHKEY="+Squarespace.Constants.SS_AUTHKEY;YAHOO.util.Connect.resetDefaultHeaders();YAHOO.util.Connect.setDefaultPostHeader(false);YAHOO.util.Connect.initHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");YAHOO.util.Connect.asyncRequest("POST",func,{timeout:10000,success:function(o){eval(o.responseText);},failure:function(o){alert("Warning!  Some dynamic changes have not been saved, as your request has failed to reach the server.  You might want to check your connection to the internet before proceeding with more changes.");}},data);this._autosaveRequired=false;Squarespace.Interaction.SaveTip.show();return true;},initializeField:function(G,J,I,A,F,K,H,C){var B=this.internalAddField(G);B.parameters=J;B.title=I;B.instructions=A;B.required=F;B.choices=K.replace(/\r/gi,"");B.defaultValue=H;this._fieldIdsToDatabaseIds[B.fieldId]=C;this._databaseIdsToFieldIds[C]=B.fieldId;this.renderField(B);},generateParameterFromField:function(A,B){return("formFieldEl"+this._fieldIdsToDatabaseIds[A]+B+"="+encodeURIComponent(D.get("formFieldEl"+A+B).value)+"&");},getDatabaseIdByFieldId:function(A){return(this._fieldIdsToDatabaseIds[A]);},callbackShowFieldError:function(B,C){var A=this._databaseIdsToFieldIds[B];this.doFieldError(A,"[ "+C+" ]");if(this._visibleErrors.length==0){this._submitButton.disabled=false;this._submitButton.value="Re-Submit";this._errorContainer.innerHTML="<strong>Your form contains errors and could not be submitted.</strong>  Navigate above to correct these errors, then click below to re-submit your form.";window.scrollTo(0,D.getXY(this._outerContainer)[1]-20);}this._visibleErrors.push(A);},callbackClearErrors:function(){for(var B=0;B<this._visibleErrors.length;++B){var A=this._visibleErrors[B];D.get("formField"+A+"Title").className="fieldTitle";D.get("formField"+A+"Error").innerHTML="";D.get("formField"+A+"Error").style.display="none";}for(var B=0;B<this._titleFieldIds.length;++B){var A=this._titleFieldIds[B];D.get("formField"+A+"Title").className="formCaption";D.get("formField"+A+"Subtitle").className="formTitle";}this._errorContainer.innerHTML="";this._visibleErrors=new Array();},callbackSuccess:function(){if(this._inlineForm){this._outerContainer.innerHTML=this._confirmationMessage;window.scrollTo(0,D.getXY(this._outerContainer)[1]-20);}else{this._submitButton.value="Success!";document.location.href=Squarespace.URL.adjustQueryParameter(document.location.href,"success","true");}},callbackFailure:function(A){this._submitButton.disabled=false;this._submitButton.value="FAILURE!";alert(A);},submitCustomForm:function(){if(!this._renderForExternalUsage){if(!this._cantSubmitTip){this._cantSubmitTip=new Squarespace.HelpTip("submitHelp","Can't Submit Form in Design Mode","You're currently logged in to your site and designing this form.  Log out completely in order to submit data as a user would.",{autoHide:4000});}this._cantSubmitTip.show();return ;}var submitVal="";this._submitButton.disabled=true;this._submitButton.value="Submitting...";fieldsSubmitted=new Array();for(id in this._fieldsByUniqueId){var f=this._fieldsByUniqueId[id];var x=null;var fieldDatabaseId=this._fieldIdsToDatabaseIds[id];if(f.fieldType==FORMFIELD_TYPE_SINGLELINETEXT||f.fieldType==FORMFIELD_TYPE_PASSWORD||f.fieldType==FORMFIELD_TYPE_PARAGRAPHTEXT||f.fieldType==FORMFIELD_TYPE_NUMBER||f.fieldType==FORMFIELD_TYPE_EMAIL||f.fieldType==FORMFIELD_TYPE_WEBSITE||f.fieldType==FORMFIELD_TYPE_DROPDOWN){x=this.generateParameterFromField(f.fieldId,"");}else{if(f.fieldType==FORMFIELD_TYPE_CHECKBOXES||f.fieldType==FORMFIELD_TYPE_MULTIPLECHOICE){x="";var opts=f.choices.replace(/\r/gi,"").split("\n");var is=0;for(var i=0;i<opts.length;++i){if(opts[i].length>0&&D.get("formFieldEl"+f.fieldId+"-"+i).checked){if(opts[i].indexOf("*")==opts[i].length-1){x+="formFieldEl"+this._fieldIdsToDatabaseIds[f.fieldId]+"-"+is+"="+encodeURIComponent(opts[i].substring(0,opts[i].length-1))+"&";}else{x+="formFieldEl"+this._fieldIdsToDatabaseIds[f.fieldId]+"-"+is+"="+encodeURIComponent(opts[i])+"&";}++is;}}}else{if(f.fieldType==FORMFIELD_TYPE_ADDRESS){x=this.generateParameterFromField(f.fieldId,"A1")+this.generateParameterFromField(f.fieldId,"A2")+this.generateParameterFromField(f.fieldId,"CT")+this.generateParameterFromField(f.fieldId,"ST")+this.generateParameterFromField(f.fieldId,"ZP")+this.generateParameterFromField(f.fieldId,"CO");}else{if(f.fieldType==FORMFIELD_TYPE_NAME){if(f.parameters=="extended"){x=this.generateParameterFromField(f.fieldId,"TI")+this.generateParameterFromField(f.fieldId,"NF")+this.generateParameterFromField(f.fieldId,"NL")+this.generateParameterFromField(f.fieldId,"SF");}else{x=this.generateParameterFromField(f.fieldId,"NF")+this.generateParameterFromField(f.fieldId,"NL");}}else{if(f.fieldType==FORMFIELD_TYPE_DATE){x=this.generateParameterFromField(f.fieldId,"MM")+this.generateParameterFromField(f.fieldId,"DD")+this.generateParameterFromField(f.fieldId,"YY");}else{if(f.fieldType==FORMFIELD_TYPE_TIME){x=this.generateParameterFromField(f.fieldId,"HH")+this.generateParameterFromField(f.fieldId,"MM")+this.generateParameterFromField(f.fieldId,"SS")+this.generateParameterFromField(f.fieldId,"AP");}else{if(f.fieldType==FORMFIELD_TYPE_PHONE){if(f.parameters=="normal"){x=this.generateParameterFromField(f.fieldId,"P1")+this.generateParameterFromField(f.fieldId,"P2")+this.generateParameterFromField(f.fieldId,"P3");}else{x=this.generateParameterFromField(f.fieldId,"");}}else{if(f.fieldType==FORMFIELD_TYPE_PRICE){if(f.parameters=="yen"){x=this.generateParameterFromField(f.fieldId,"");}else{x=this.generateParameterFromField(f.fieldId,"DL")+this.generateParameterFromField(f.fieldId,"CT");}}}}}}}}}if(x!=null){fieldsSubmitted.push(fieldDatabaseId);submitVal+=x;}}submitVal+="fieldsSubmitted="+fieldsSubmitted.join(",");var func="/process/CreateFormEntry";var data="moduleId="+this._currentModuleId+"&instanceName="+encodeURIComponent(this._instanceName)+"&"+submitVal;YAHOO.util.Connect.resetDefaultHeaders();YAHOO.util.Connect.setDefaultPostHeader(false);YAHOO.util.Connect.initHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");YAHOO.util.Connect.asyncRequest("POST",func,{timeout:20000,success:function(o){eval(o.responseText);},failure:function(response){if(response.status===-1){alert("The form submission seems to be taking a long time. Please try again.");}else{alert("Unable to send your form to the server.  Please check your internet connection.");}this._submitButton.disabled=false;this._submitButton.value="Submit";}},data);}});SSForm=Squarespace.FormBuilder;